@model IEnumerable<Inmobiliaria_Rios.Models.Usuario>

@{
    ViewData["Title"] = "Perfiles de Usuarios";
}

<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    body {
        overflow-y: auto !important;
        min-height: 100vh;
    }
    .container {
        min-height: 100vh;
    }
</style>

<div class="container mt-5">
    <h2 class="mb-4">Perfiles de Usuarios</h2>
    <table class="table table-bordered table-striped">
        <thead class="table-info">
            <tr>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Telefono</th>
                <th>Email</th>
                <th>Rol</th>
                <th>Contraseña</th>
                <th>Estado</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
        @foreach (var usuario in Model)
        {
            <tr>
                <form asp-action="EditarPerfil" asp-controller="Account" method="post" class="d-inline">
                    <td>
                        <input type="hidden" name="Idusuarios" value="@usuario.Idusuarios" />
                        <input type="text" name="Nombre" value="@usuario.Nombre" class="form-control" />
                    </td>
                    <td>
                        <input type="text" name="Apellido" value="@usuario.Apellido" class="form-control" />
                    </td>
                    <td>
                        <input type="text" name="Telefono" value="@usuario.Telefono" class="form-control" />
                    </td>
                    <td>
                        <input type="email" name="Mail" value="@usuario.Mail" class="form-control" />
                    </td>
                    <td>
                        <select name="Rol" class="form-select">
                            <option value="admin" selected="@(usuario.Rol == "admin" ? "selected" : null)">admin</option>
                            <option value="empleado" selected="@(usuario.Rol == "empleado" ? "selected" : null)">empleado</option>
                        </select>
                    </td>
                    <td>
                        <input type="text" name="Contraseña" value="@usuario.Contraseña" class="form-control" />
                    </td>
                    <td>
                        <select name="Estado" class="form-select">
                            <option value="1" selected="@(usuario.Estado == 1 ? "selected" : null)">Activo</option>
                            <option value="2" selected="@(usuario.Estado == 2 ? "selected" : null)">Inactivo</option>
                        </select>
                    </td>
                    <td>
                        <button type="submit" class="btn btn-success btn-sm">
                            <i class="bi bi-save"></i> Guardar
                        </button>
                    </td>
                </form>
            </tr>
        }
        </tbody>
    </table>
    <div class="mt-4 text-center">
        @* Botón Volver a inicio eliminado *@
    </div>
    <div class="mt-5">
        <h3 class="mb-3">Nuevos Usuarios</h3>
        <form asp-action="CrearUsuario" asp-controller="Account" method="post" class="row g-3">
            <div class="col-md-2">
                <input type="text" name="Nombre" class="form-control" placeholder="Nombre" required />
            </div>
            <div class="col-md-2">
                <input type="text" name="Apellido" class="form-control" placeholder="Apellido" required />
            </div>
            <div class="col-md-2">
                <input type="text" name="Telefono" class="form-control" placeholder="Teléfono" />
            </div>
            <div class="col-md-2">
                <input type="email" name="Mail" class="form-control" placeholder="Email" required />
            </div>
            <div class="col-md-2">
                <select name="Rol" class="form-select" required>
                    <option value="">Rol...</option>
                    <option value="admin">admin</option>
                    <option value="empleado">empleado</option>
                </select>
            </div>
            <div class="col-md-2">
                <input type="text" name="Contraseña" class="form-control" placeholder="Contraseña" required />
            </div>
            <div class="col-12 text-center">
                <button type="submit" class="btn btn-success">
                    <i class="bi bi-plus-circle"></i> Agregar usuario
                </button>
            </div>
        </form>
    </div>
</div>
